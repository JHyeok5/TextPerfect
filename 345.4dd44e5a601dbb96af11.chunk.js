"use strict";(self.webpackChunktextperfect=self.webpackChunktextperfect||[]).push([[345],{68345:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var l=a(96540),r=a(11080),s=a(78280),n=a(80113),c=a(94847),o=a(77831),i=a(61409);const m=e=>{var t;let{isOpen:a,onClose:r,subscriptionData:n,onCancel:c}=e;const[o,m]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1);return l.createElement(s.g,{open:a,onClose:r,title:"구독 취소"},l.createElement("div",{className:"space-y-4"},l.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},l.createElement("div",{className:"flex"},l.createElement("div",{className:"flex-shrink-0"},l.createElement("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},l.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))),l.createElement("div",{className:"ml-3"},l.createElement("h3",{className:"text-sm font-medium text-yellow-800"},"구독 취소 안내"),l.createElement("div",{className:"mt-2 text-sm text-yellow-700"},l.createElement("p",null,"구독을 취소하시면 프리미엄 기능을 더 이상 이용하실 수 없습니다."))))),l.createElement("div",{className:"space-y-3"},l.createElement("div",{className:"flex items-center"},l.createElement("input",{id:"cancel-period-end",type:"radio",checked:!o,onChange:()=>m(!1),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),l.createElement("label",{htmlFor:"cancel-period-end",className:"ml-3 block text-sm font-medium text-gray-700"},"현재 결제 기간 종료 시 취소",l.createElement("p",{className:"text-xs text-gray-500 mt-1"},(null==n||null===(t=n.subscription)||void 0===t?void 0:t.currentPeriodEnd)&&"".concat(new Date(n.subscription.currentPeriodEnd).toLocaleDateString("ko-KR"),"까지 계속 이용 가능")))),l.createElement("div",{className:"flex items-center"},l.createElement("input",{id:"cancel-immediately",type:"radio",checked:o,onChange:()=>m(!0),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300"}),l.createElement("label",{htmlFor:"cancel-immediately",className:"ml-3 block text-sm font-medium text-gray-700"},"즉시 취소",l.createElement("p",{className:"text-xs text-gray-500 mt-1"},"지금 즉시 구독이 취소되며 프리미엄 기능 이용이 중단됩니다.")))),l.createElement("div",{className:"flex gap-3 pt-4"},l.createElement(s.b,{variant:"outline",onClick:r,disabled:d,className:"flex-1"},"취소"),l.createElement(s.b,{variant:"primary",onClick:async()=>{var e;if(null!=n&&null!==(e=n.subscription)&&void 0!==e&&e.id){u(!0);try{await c(n.subscription.id,o)&&r()}finally{u(!1)}}else i.b.error("구독 정보를 찾을 수 없습니다.")},disabled:d,className:"flex-1 bg-red-600 hover:bg-red-700"},d?l.createElement(s.f,{size:"sm"}):"구독 취소"))))},d=()=>{var e,t,a;const[d]=(0,r.h)(),{user:u,isAuthenticated:E,userType:p}=(0,n.b)(),{loading:x,subscriptionData:b,startCheckout:f,openCustomerPortal:N,cancelSubscriptionPlan:v,isSubscribed:g}=(0,c.a)(),[h,y]=(0,l.useState)(!0),[w,k]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{const e=d.get("canceled"),t=d.get("success");e&&i.b.warning("결제가 취소되었습니다."),t&&i.b.success("결제가 완료되었습니다! 프리미엄 기능을 이용해보세요."),y(!1)},[d]),h)return l.createElement("div",{className:"flex justify-center items-center min-h-[400px]"},l.createElement(s.f,null));const L=async e=>{E?await f(e):i.b.error("결제를 위해 로그인이 필요합니다.")};return l.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},l.createElement("div",{className:"mb-8"},l.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"구독 관리"),l.createElement("p",{className:"text-gray-600"},"현재 구독 상태를 확인하고 플랜을 변경하세요.")),l.createElement(s.c,{className:"mb-8"},l.createElement("div",{className:"p-6"},l.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-4"},"현재 구독 상태"),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},l.createElement("div",null,l.createElement("div",{className:"mb-4"},l.createElement("span",{className:"text-sm text-gray-600"},"현재 플랜"),l.createElement("div",{className:"flex items-center mt-1"},l.createElement("span",{className:"text-2xl font-bold ".concat("FREE"===p?"text-gray-600":"text-blue-600")},"FREE"===p?"무료 플랜":"프리미엄 플랜"),"PREMIUM"===p&&l.createElement("span",{className:"ml-2 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full"},"PRO"))),(null==b?void 0:b.subscription)&&l.createElement("div",{className:"space-y-2"},l.createElement("div",{className:"flex justify-between"},l.createElement("span",{className:"text-gray-600"},"상태"),l.createElement("span",{className:"font-medium ".concat("active"===b.subscription.status?"text-green-600":"canceled"===b.subscription.status?"text-red-600":"text-yellow-600")},getStatusText(b.subscription.status))),l.createElement("div",{className:"flex justify-between"},l.createElement("span",{className:"text-gray-600"},b.subscription.cancelAtPeriodEnd?"서비스 종료일":"다음 결제일"),l.createElement("span",{className:"font-medium"},new Date(b.subscription.currentPeriodEnd).toLocaleDateString("ko-KR"))),b.subscription.cancelAtPeriodEnd&&l.createElement("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},l.createElement("p",{className:"text-sm text-yellow-800"},"구독이 취소되었습니다. ",new Date(b.subscription.currentPeriodEnd).toLocaleDateString("ko-KR"),"까지 프리미엄 기능을 이용할 수 있습니다.")))),l.createElement("div",null,l.createElement("div",{className:"mb-4"},l.createElement("span",{className:"text-sm text-gray-600"},"이번 달 사용량"),l.createElement("div",{className:"mt-2"},l.createElement("div",{className:"flex justify-between text-sm mb-1"},l.createElement("span",null,"문서 분석"),l.createElement("span",null,(null==b||null===(e=b.usage)||void 0===e?void 0:e.monthlyDocs)||0," / ","FREE"===p?10:100)),l.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},l.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(((null==b||null===(t=b.usage)||void 0===t?void 0:t.monthlyDocs)||0)/("FREE"===p?10:100)*100,100),"%")}})))),l.createElement("div",{className:"space-y-2 text-sm"},l.createElement("div",{className:"flex justify-between"},l.createElement("span",{className:"text-gray-600"},"일일 문자 제한"),l.createElement("span",{className:"font-medium"},"FREE"===p?"1,000자":"10,000자")),l.createElement("div",{className:"flex justify-between"},l.createElement("span",{className:"text-gray-600"},"최대 텍스트 길이"),l.createElement("span",{className:"font-medium"},"FREE"===p?"3,000자":"10,000자"))))),l.createElement("div",{className:"mt-6 pt-6 border-t border-gray-200"},l.createElement("div",{className:"flex flex-wrap gap-3"},"FREE"===p?l.createElement(s.b,{variant:"primary",onClick:()=>L("PREMIUM_MONTHLY"),disabled:x},x?l.createElement(s.f,{size:"sm"}):"프리미엄으로 업그레이드"):l.createElement(l.Fragment,null,!(null!=b&&null!==(a=b.subscription)&&void 0!==a&&a.cancelAtPeriodEnd)&&l.createElement(s.b,{variant:"secondary",onClick:()=>k(!0),disabled:x},"구독 취소"),l.createElement(s.b,{variant:"outline",onClick:N,disabled:x},"결제 정보 관리")))))),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},l.createElement(s.c,{className:"relative ".concat("FREE"===p?"ring-2 ring-blue-500":"")},l.createElement("div",{className:"p-6"},"FREE"===p&&l.createElement("div",{className:"absolute top-4 right-4"},l.createElement("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full"},"현재 플랜")),l.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"무료 플랜"),l.createElement("div",{className:"text-3xl font-bold text-gray-900 mb-4"},"₩0",l.createElement("span",{className:"text-base font-normal text-gray-600"},"/월")),l.createElement("ul",{className:"space-y-3 mb-6"},l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"월 10개 문서 분석"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"일일 1,000자 제한"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"최대 3,000자 텍스트"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"기본 템플릿 이용")),"FREE"!==p&&l.createElement(s.b,{variant:"outline",className:"w-full",disabled:!0},"현재 플랜 아님"))),l.createElement(s.c,{className:"relative ".concat("PREMIUM"===p?"ring-2 ring-blue-500":"")},l.createElement("div",{className:"p-6"},"PREMIUM"===p&&l.createElement("div",{className:"absolute top-4 right-4"},l.createElement("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full"},"현재 플랜")),l.createElement("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},l.createElement("span",{className:"bg-blue-600 text-white text-xs px-3 py-1 rounded-full"},"추천")),l.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"프리미엄 플랜"),l.createElement("div",{className:"text-3xl font-bold text-gray-900 mb-4"},"₩",(M=o.a.PREMIUM_MONTHLY.price,new Intl.NumberFormat("ko-KR").format(M)),l.createElement("span",{className:"text-base font-normal text-gray-600"},"/월")),l.createElement("ul",{className:"space-y-3 mb-6"},l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"월 100개 문서 분석"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"일일 10,000자 제한"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"최대 10,000자 텍스트"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"모든 템플릿 이용"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"우선 고객 지원"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"고급 분석 기능")),"FREE"===p?l.createElement(s.b,{variant:"primary",className:"w-full",onClick:()=>L("PREMIUM_MONTHLY"),disabled:x},x?l.createElement(s.f,{size:"sm"}):"업그레이드"):l.createElement(s.b,{variant:"outline",className:"w-full",disabled:!0},"현재 이용 중")))),l.createElement(m,{isOpen:w,onClose:()=>k(!1),subscriptionData:b,onCancel:v}));var M}},77831:(e,t,a)=>{a.d(t,{a:()=>n,b:()=>l,c:()=>r,d:()=>s}),a(22037);const l=async(e,t,a)=>{try{const l=await fetch("/.netlify/functions/stripe-create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planType:e,userId:t,userEmail:a})}),r=await l.json();if(!r.success)throw new Error(r.error||"Failed to create checkout session");return r.data}catch(e){throw console.error("Create checkout session error:",e),e}},r=async e=>{try{const t=await fetch("/.netlify/functions/stripe-customer-portal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e})}),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to create customer portal session");return a.data}catch(e){throw console.error("Create customer portal session error:",e),e}},s=async e=>{try{const t=await fetch("/.netlify/functions/stripe-get-subscription?userEmail=".concat(encodeURIComponent(e))),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to get subscription status");return a.data}catch(e){throw console.error("Get subscription status error:",e),e}},n={PREMIUM_MONTHLY:{id:"PREMIUM_MONTHLY",name:"프리미엄 월간",price:9900,interval:"month",description:"월 9,900원으로 모든 프리미엄 기능 이용",features:["월 100개 문서","최대 10,000자","AI 고급 분석","모든 템플릿","AI 코치 과정","우선 지원"]},PREMIUM_YEARLY:{id:"PREMIUM_YEARLY",name:"프리미엄 연간",price:99e3,interval:"year",description:"연 99,000원 (2개월 무료)",savings:"19,800원 절약",features:["월 100개 문서","최대 10,000자","AI 고급 분석","모든 템플릿","AI 코치 과정","우선 지원","2개월 무료"]}}},94847:(e,t,a)=>{a.d(t,{a:()=>c});var l=a(96540),r=a(80113),s=a(77831),n=a(61409);const c=()=>{const{user:e,isAuthenticated:t}=(0,r.b)(),[a,c]=(0,l.useState)(!1),[o,i]=(0,l.useState)(null),m=async()=>{if(t&&null!=e&&e.email)try{c(!0);const t=await(0,s.d)(e.email);i(t)}catch(e){console.error("Failed to fetch subscription status:",e),n.b.error("���� ���¸� ��ȸ�ϴµ� �����߽��ϴ�.")}finally{c(!1)}};return(0,l.useEffect)(()=>{t&&null!=e&&e.email&&m()},[t,null==e?void 0:e.email]),{loading:a,subscriptionData:o,startCheckout:async a=>{if(t)if(null!=e&&e.id&&null!=e&&e.email)try{c(!0);const{url:t}=await(0,s.b)(a,e.id,e.email);window.location.href=t}catch(e){console.error("Checkout failed:",e),n.b.error("���� �������� �̵��ϴµ� �����߽��ϴ�."),c(!1)}else n.b.error("����� ������ �����ϴ�.");else n.b.error("�α����� �ʿ��մϴ�.")},openCustomerPortal:async()=>{if(t&&null!=e&&e.email)try{c(!0);const{url:t}=await(0,s.c)(e.email);window.location.href=t}catch(e){console.error("Customer portal failed:",e),n.b.error("���� ���� �������� �̵��ϴµ� �����߽��ϴ�."),c(!1)}else n.b.error("�α����� �ʿ��մϴ�.")},fetchSubscriptionStatus:m,isSubscribed:"PREMIUM"===(null==o?void 0:o.plan),subscriptionStatus:null==o?void 0:o.status}}}}]);