"use strict";(self.webpackChunktextperfect=self.webpackChunktextperfect||[]).push([[865],{89865:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(54705),l=a(96540),n=a(80113),s=a(78280),m=a(61409);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){(0,r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const i=e=>{let{isOpen:t,onClose:a,user:r,onUpdate:n}=e;const[c,i]=(0,l.useState)({nickname:(null==r?void 0:r.nickname)||"",email:(null==r?void 0:r.email)||""}),[d,u]=(0,l.useState)(!1);return l.createElement(s.g,{open:t,onClose:a,title:"프로필 편집"},l.createElement("form",{onSubmit:async e=>{e.preventDefault(),u(!0);try{await new Promise(e=>setTimeout(e,1e3)),m.b.success("프로필이 성공적으로 업데이트되었습니다."),n(c),a()}catch(e){m.b.error("프로필 업데이트에 실패했습니다.")}finally{u(!1)}},className:"space-y-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"닉네임"),l.createElement("input",{type:"text",value:c.nickname,onChange:e=>i(o(o({},c),{},{nickname:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"이메일"),l.createElement("input",{type:"email",value:c.email,onChange:e=>i(o(o({},c),{},{email:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})),l.createElement("div",{className:"flex gap-2 pt-4"},l.createElement(s.b,{type:"submit",variant:"primary",disabled:d,className:"flex-1"},d?l.createElement(s.f,{size:"sm"}):"저장"),l.createElement(s.b,{type:"button",variant:"secondary",onClick:a,disabled:d,className:"flex-1"},"취소"))))},d=e=>{let{isOpen:t,onClose:a}=e;const[r,n]=(0,l.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[c,i]=(0,l.useState)(!1);return l.createElement(s.g,{open:t,onClose:a,title:"비밀번호 변경"},l.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),r.newPassword===r.confirmPassword)if(r.newPassword.length<8)m.b.error("비밀번호는 8자 이상이어야 합니다.");else{i(!0);try{await new Promise(e=>setTimeout(e,1e3)),m.b.success("비밀번호가 성공적으로 변경되었습니다."),n({currentPassword:"",newPassword:"",confirmPassword:""}),a()}catch(e){m.b.error("비밀번호 변경에 실패했습니다.")}finally{i(!1)}}else m.b.error("새 비밀번호가 일치하지 않습니다.")},className:"space-y-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"현재 비밀번호"),l.createElement("input",{type:"password",value:r.currentPassword,onChange:e=>n(o(o({},r),{},{currentPassword:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"새 비밀번호"),l.createElement("input",{type:"password",value:r.newPassword,onChange:e=>n(o(o({},r),{},{newPassword:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,minLength:8})),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"새 비밀번호 확인"),l.createElement("input",{type:"password",value:r.confirmPassword,onChange:e=>n(o(o({},r),{},{confirmPassword:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,minLength:8})),l.createElement("div",{className:"flex gap-2 pt-4"},l.createElement(s.b,{type:"submit",variant:"primary",disabled:c,className:"flex-1"},c?l.createElement(s.f,{size:"sm"}):"변경"),l.createElement(s.b,{type:"button",variant:"secondary",onClick:a,disabled:c,className:"flex-1"},"취소"))))};function u(){var e,t,a,r,m,c;const{user:u,isAuthenticated:b,loading:p}=(0,n.b)(),[v,x]=(0,l.useState)(!1),[g,E]=(0,l.useState)(!1),[f,y]=(0,l.useState)(null);if((0,l.useEffect)(()=>{u&&y(u)},[u]),p)return l.createElement("div",{className:"flex justify-center items-center min-h-[400px]"},l.createElement(s.f,null));if(!b)return l.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},l.createElement("div",{className:"text-center py-12"},l.createElement("div",{className:"mb-6"},l.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}))),l.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4"},"로그인이 필요합니다"),l.createElement("p",{className:"text-gray-600 mb-6"},"프로필을 보려면 먼저 로그인해주세요."),l.createElement(s.b,{variant:"primary"},"로그인하기")));const N=f||u||{};return l.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},l.createElement("div",{className:"mb-8"},l.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"프로필"),l.createElement("p",{className:"text-gray-600"},"계정 정보와 활동 현황을 확인하고 관리하세요.")),l.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},l.createElement(s.c,{className:"lg:col-span-2"},l.createElement("div",{className:"p-6"},l.createElement("div",{className:"flex items-center justify-between mb-6"},l.createElement("h3",{className:"text-xl font-semibold text-gray-900"},"기본 정보"),l.createElement(s.b,{variant:"outline",size:"sm",onClick:()=>x(!0)},"편집")),l.createElement("div",{className:"space-y-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"닉네임"),l.createElement("div",{className:"p-3 bg-gray-50 border rounded-md"},N.nickname||N.name||(null===(e=N.email)||void 0===e?void 0:e.split("@")[0])||"설정되지 않음")),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"이메일"),l.createElement("div",{className:"p-3 bg-gray-50 border rounded-md"},N.email||"설정되지 않음")),l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"가입일"),l.createElement("div",{className:"p-3 bg-gray-50 border rounded-md"},N.createdAt?new Date(N.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):N.created_at?new Date(N.created_at).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"정보 없음"))),l.createElement("div",{className:"mt-6 pt-6 border-t"},l.createElement("h4",{className:"text-lg font-medium text-gray-900 mb-4"},"보안"),l.createElement(s.b,{variant:"secondary",onClick:()=>E(!0)},"비밀번호 변경")))),l.createElement(s.c,null,l.createElement("div",{className:"p-6 text-center"},l.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-6"},"레벨 정보"),l.createElement("div",{className:"mb-6"},l.createElement("div",{className:"text-4xl font-bold text-blue-600 mb-2"},"Lv.",N.level||1),l.createElement("div",{className:"text-gray-600"},N.nickname||N.name||(null===(t=N.email)||void 0===t?void 0:t.split("@")[0])||"사용자")),l.createElement("div",{className:"mb-6"},l.createElement("div",{className:"text-sm text-gray-600 mb-2"},"경험치"),l.createElement(s.h,{value:N.exp||N.experience||0,max:1e3}),l.createElement("div",{className:"text-xs text-gray-500 mt-1"},N.exp||N.experience||0," / 1000 XP")),l.createElement("div",{className:"text-sm text-gray-600"},l.createElement("div",null,"다음 레벨까지 ",1e3-(N.exp||N.experience||0),"XP")))),l.createElement(s.c,{className:"lg:col-span-3"},l.createElement("div",{className:"p-6"},l.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-6"},"활동 통계"),l.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4"},l.createElement("div",{className:"text-center p-4 bg-blue-50 rounded-lg"},l.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},(null===(a=N.stats)||void 0===a?void 0:a.optimizedDocs)||N.optimized_docs||0),l.createElement("div",{className:"text-sm text-gray-600"},"최적화한 문서")),l.createElement("div",{className:"text-center p-4 bg-green-50 rounded-lg"},l.createElement("div",{className:"text-3xl font-bold text-green-600 mb-2"},(null===(r=N.stats)||void 0===r?void 0:r.improvedSentences)||N.improved_sentences||0),l.createElement("div",{className:"text-sm text-gray-600"},"개선한 문장")),l.createElement("div",{className:"text-center p-4 bg-yellow-50 rounded-lg"},l.createElement("div",{className:"text-3xl font-bold text-yellow-600 mb-2"},(null===(m=N.stats)||void 0===m?void 0:m.avgImprovement)||N.avg_improvement||0,"%"),l.createElement("div",{className:"text-sm text-gray-600"},"평균 개선도")),l.createElement("div",{className:"text-center p-4 bg-purple-50 rounded-lg"},l.createElement("div",{className:"text-3xl font-bold text-purple-600 mb-2"},(null===(c=N.stats)||void 0===c?void 0:c.consecutiveDays)||N.consecutive_days||0),l.createElement("div",{className:"text-sm text-gray-600"},"연속 사용일")))))),l.createElement(i,{isOpen:v,onClose:()=>x(!1),user:N,onUpdate:e=>{y(o(o({},f),e))}}),l.createElement(d,{isOpen:g,onClose:()=>E(!1)}))}}}]);