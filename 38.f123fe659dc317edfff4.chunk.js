"use strict";(self.webpackChunktextperfect=self.webpackChunktextperfect||[]).push([[38],{77831:(e,t,a)=>{a.d(t,{a:()=>s,b:()=>r,c:()=>l,d:()=>n}),a(22037);const r=async(e,t,a)=>{try{const r=await fetch("/.netlify/functions/stripe-create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planType:e,userId:t,userEmail:a})}),l=await r.json();if(!l.success)throw new Error(l.error||"Failed to create checkout session");return l.data}catch(e){throw console.error("Create checkout session error:",e),e}},l=async e=>{try{const t=await fetch("/.netlify/functions/stripe-customer-portal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e})}),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to create customer portal session");return a.data}catch(e){throw console.error("Create customer portal session error:",e),e}},n=async e=>{try{const t=await fetch("/.netlify/functions/stripe-get-subscription?userEmail=".concat(encodeURIComponent(e))),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to get subscription status");return a.data}catch(e){throw console.error("Get subscription status error:",e),e}},s={PREMIUM_MONTHLY:{id:"PREMIUM_MONTHLY",name:"프리미엄 월간",price:9900,interval:"month",description:"월 9,900원으로 모든 프리미엄 기능 이용",features:["월 100개 문서","최대 10,000자","AI 고급 분석","모든 템플릿","AI 코치 과정","우선 지원"]},PREMIUM_YEARLY:{id:"PREMIUM_YEARLY",name:"프리미엄 연간",price:99e3,interval:"year",description:"연 99,000원 (2개월 무료)",savings:"19,800원 절약",features:["월 100개 문서","최대 10,000자","AI 고급 분석","모든 템플릿","AI 코치 과정","우선 지원","2개월 무료"]}}},80038:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(54705),l=a(96540),n=a(11080),s=a(80113),c=a(94847),o=a(78280);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach(function(t){(0,r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const d=()=>{var e,t,a,r,i,d;const u=(0,n.g)(),{user:p,userType:v,isAuthenticated:E,dailyUsage:f,monthlyDocs:h,getDailyUsagePercentage:x,getDocsUsagePercentage:g,getRemainingDocs:y,USAGE_LIMITS:b}=(0,s.b)(),{subscriptionData:N,isSubscribed:w}=(0,c.a)(),[k,j]=(0,l.useState)({totalDocuments:0,totalCharacters:0,averageScore:0,improvementRate:0,weeklyActivity:[]}),[L,M]=(0,l.useState)(!0);(0,l.useEffect)(()=>{E&&null!=p&&p.id?(async()=>{try{const e=localStorage.getItem("userStats_".concat(null==p?void 0:p.id));e&&j(JSON.parse(e));const t=C();j(e=>m(m({},e),{},{weeklyActivity:t}))}catch(e){console.error("Failed to load user stats:",e)}finally{M(!1)}})():M(!1)},[E,null==p?void 0:p.id]);const C=()=>["월","화","수","목","금","토","일"].map(e=>({day:e,documents:Math.floor(5*Math.random()),characters:Math.floor(2e3*Math.random())}));return E?L?l.createElement("div",{className:"flex justify-center items-center min-h-[400px]"},l.createElement(o.f,null)):(b[v]||b.GUEST,l.createElement("div",{className:"max-w-6xl mx-auto px-4 py-8"},l.createElement("div",{className:"mb-8"},l.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"안녕하세요, ",(null==p?void 0:p.nickname)||(null==p?void 0:p.name)||(null==p||null===(e=p.email)||void 0===e?void 0:e.split("@")[0])||"사용자","님! 👋"),l.createElement("p",{className:"text-gray-600"},"오늘도 완벽한 텍스트를 만들어보세요.")),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},l.createElement(o.c,{className:"p-6"},l.createElement("div",{className:"flex items-center"},l.createElement("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4"},l.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))),l.createElement("div",null,l.createElement("p",{className:"text-sm font-medium text-gray-600"},"최적화한 문서"),l.createElement("p",{className:"text-2xl font-bold text-gray-900"},(null==p||null===(t=p.stats)||void 0===t?void 0:t.optimizedDocs)||0)))),l.createElement(o.c,{className:"p-6"},l.createElement("div",{className:"flex items-center"},l.createElement("div",{className:"p-3 rounded-full bg-green-100 text-green-600 mr-4"},l.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"}))),l.createElement("div",null,l.createElement("p",{className:"text-sm font-medium text-gray-600"},"개선한 문장"),l.createElement("p",{className:"text-2xl font-bold text-gray-900"},(null==p||null===(a=p.stats)||void 0===a?void 0:a.improvedSentences)||0)))),l.createElement(o.c,{className:"p-6"},l.createElement("div",{className:"flex items-center"},l.createElement("div",{className:"p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4"},l.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"}))),l.createElement("div",null,l.createElement("p",{className:"text-sm font-medium text-gray-600"},"평균 개선도"),l.createElement("p",{className:"text-2xl font-bold text-gray-900"},(null==p||null===(r=p.stats)||void 0===r?void 0:r.avgImprovement)||0,"%")))),l.createElement(o.c,{className:"p-6"},l.createElement("div",{className:"flex items-center"},l.createElement("div",{className:"p-3 rounded-full bg-purple-100 text-purple-600 mr-4"},l.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),l.createElement("div",null,l.createElement("p",{className:"text-sm font-medium text-gray-600"},"연속 사용일"),l.createElement("p",{className:"text-2xl font-bold text-gray-900"},(null==p||null===(i=p.stats)||void 0===i?void 0:i.consecutiveDays)||0,"일"))))),l.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},l.createElement(o.c,{className:"lg:col-span-1"},l.createElement("div",{className:"p-6"},l.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},"내 레벨"),l.createElement("div",{className:"text-center mb-4"},l.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},"Lv.",(null==p?void 0:p.level)||1),l.createElement(o.a,{variant:"primary"},(null==p||null===(d=p.subscription)||void 0===d?void 0:d.plan)||"FREE")),l.createElement("div",{className:"mb-4"},l.createElement("div",{className:"flex justify-between text-sm text-gray-600 mb-1"},l.createElement("span",null,"경험치"),l.createElement("span",null,(null==p?void 0:p.exp)||0," / 1000")),l.createElement(o.h,{value:(null==p?void 0:p.exp)||0,max:1e3})),l.createElement("p",{className:"text-sm text-gray-600 text-center"},"다음 레벨까지 ",1e3-((null==p?void 0:p.exp)||0)," XP"))),l.createElement(o.c,{className:"lg:col-span-2"},l.createElement("div",{className:"p-6"},l.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},"빠른 시작"),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},l.createElement(o.b,{variant:"primary",className:"h-20 flex flex-col items-center justify-center"},l.createElement("svg",{className:"w-6 h-6 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})),l.createElement("span",null,"새 문서 작성")),l.createElement(o.b,{variant:"secondary",className:"h-20 flex flex-col items-center justify-center"},l.createElement("svg",{className:"w-6 h-6 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})),l.createElement("span",null,"분석 보기")),l.createElement(o.b,{variant:"outline",className:"h-20 flex flex-col items-center justify-center"},l.createElement("svg",{className:"w-6 h-6 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})),l.createElement("span",null,"템플릿 보기")),l.createElement(o.b,{variant:"outline",className:"h-20 flex flex-col items-center justify-center"},l.createElement("svg",{className:"w-6 h-6 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})),l.createElement("span",null,"구독 관리")))))),l.createElement(o.c,{className:"mt-8"},l.createElement("div",{className:"p-6"},l.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},"최근 활동"),l.createElement("div",{className:"space-y-4"},l.createElement("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg"},l.createElement("div",{className:"flex-shrink-0"},l.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},l.createElement("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),l.createElement("div",{className:"ml-4 flex-1"},l.createElement("p",{className:"text-sm font-medium text-gray-900"},"새로운 문서를 최적화했습니다"),l.createElement("p",{className:"text-sm text-gray-500"},"2시간 전"))),l.createElement("div",{className:"text-center py-8 text-gray-500"},l.createElement("p",null,"더 많은 활동을 위해 새 문서를 작성해보세요!"))))))):l.createElement("div",{className:"max-w-6xl mx-auto px-4 py-8"},l.createElement("div",{className:"text-center py-12"},l.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4"},"로그인이 필요합니다"),l.createElement("p",{className:"text-gray-600 mb-6"},"대시보드를 이용하려면 먼저 로그인해주세요."),l.createElement(o.b,{variant:"primary",onClick:()=>u("/login")},"로그인하기")))}},94847:(e,t,a)=>{a.d(t,{a:()=>c});var r=a(96540),l=a(80113),n=a(77831),s=a(61409);const c=()=>{const{user:e,isAuthenticated:t}=(0,l.b)(),[a,c]=(0,r.useState)(!1),[o,i]=(0,r.useState)(null),m=async()=>{if(t&&null!=e&&e.email)try{c(!0);const t=await(0,n.d)(e.email);i(t)}catch(e){console.error("Failed to fetch subscription status:",e),s.b.error("���� ���¸� ��ȸ�ϴµ� �����߽��ϴ�.")}finally{c(!1)}};return(0,r.useEffect)(()=>{t&&null!=e&&e.email&&m()},[t,null==e?void 0:e.email]),{loading:a,subscriptionData:o,startCheckout:async a=>{if(t)if(null!=e&&e.id&&null!=e&&e.email)try{c(!0);const{url:t}=await(0,n.b)(a,e.id,e.email);window.location.href=t}catch(e){console.error("Checkout failed:",e),s.b.error("���� �������� �̵��ϴµ� �����߽��ϴ�."),c(!1)}else s.b.error("����� ������ �����ϴ�.");else s.b.error("�α����� �ʿ��մϴ�.")},openCustomerPortal:async()=>{if(t&&null!=e&&e.email)try{c(!0);const{url:t}=await(0,n.c)(e.email);window.location.href=t}catch(e){console.error("Customer portal failed:",e),s.b.error("���� ���� �������� �̵��ϴµ� �����߽��ϴ�."),c(!1)}else s.b.error("�α����� �ʿ��մϴ�.")},fetchSubscriptionStatus:m,isSubscribed:"PREMIUM"===(null==o?void 0:o.plan),subscriptionStatus:null==o?void 0:o.status}}}}]);