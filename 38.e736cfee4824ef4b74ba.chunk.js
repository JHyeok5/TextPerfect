"use strict";(self.webpackChunktextperfect=self.webpackChunktextperfect||[]).push([[38],{77831:(e,t,a)=>{a.d(t,{a:()=>c,b:()=>r,c:()=>l,d:()=>s,e:()=>n}),a(22037);const r=async(e,t,a)=>{try{const r=await fetch("/.netlify/functions/stripe-create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planType:e,userId:t,userEmail:a})}),l=await r.json();if(!l.success)throw new Error(l.error||"Failed to create checkout session");return l.data}catch(e){throw console.error("Create checkout session error:",e),e}},l=async e=>{try{const t=await fetch("/.netlify/functions/stripe-customer-portal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e})}),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to create customer portal session");return a.data}catch(e){throw console.error("Create customer portal session error:",e),e}},s=async e=>{try{const t=await fetch("/.netlify/functions/stripe-get-subscription?userEmail=".concat(encodeURIComponent(e))),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to get subscription status");return a.data}catch(e){throw console.error("Get subscription status error:",e),e}},n=async e=>{try{const t=await fetch("/.netlify/functions/stripe-verify-session?session_id=".concat(e)),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to verify checkout session");return a.data}catch(e){throw console.error("Verify checkout session error:",e),e}},c={PREMIUM_MONTHLY:{id:"PREMIUM_MONTHLY",name:"프리미엄 월간",price:9900,interval:"month",description:"월 9,900원으로 모든 프리미엄 기능 이용",features:["월 100개 문서","최대 10,000자","AI 고급 분석","모든 템플릿","AI 코치 과정","우선 지원"]},PREMIUM_YEARLY:{id:"PREMIUM_YEARLY",name:"프리미엄 연간",price:99e3,interval:"year",description:"연 99,000원 (2개월 무료)",savings:"19,800원 절약",features:["월 100개 문서","최대 10,000자","AI 고급 분석","모든 템플릿","AI 코치 과정","우선 지원","2개월 무료"]}}},80038:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(54705),l=a(96540),s=a(11080),n=a(5105),c=a(78280),o=a(80113),i=a(94847);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach(function(t){(0,r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const u=()=>{var e;const t=(0,s.g)(),{user:a,userType:r,isAuthenticated:m,dailyUsage:u,monthlyDocs:f,getDailyUsagePercentage:b,getDocsUsagePercentage:g,getRemainingDocs:E,USAGE_LIMITS:y}=(0,o.b)(),{subscriptionData:h,isSubscribed:x}=(0,i.a)(),[p,v]=(0,l.useState)({totalDocuments:0,totalCharacters:0,averageScore:0,improvementRate:0,weeklyActivity:[]}),[N,w]=(0,l.useState)(!0);(0,l.useEffect)(()=>{m&&null!=a&&a.id?(async()=>{try{const e=localStorage.getItem("userStats_".concat(null==a?void 0:a.id));e&&v(JSON.parse(e));const t=k();v(e=>d(d({},e),{},{weeklyActivity:t}))}catch(e){console.error("Failed to load user stats:",e)}finally{w(!1)}})():w(!1)},[m,null==a?void 0:a.id]);const k=()=>["월","화","수","목","금","토","일"].map(e=>({day:e,documents:Math.floor(5*Math.random()),characters:Math.floor(2e3*Math.random())}));if(!m)return l.createElement(n.a,null,l.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8"},l.createElement("div",{className:"text-center"},l.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-4"},"로그인이 필요합니다"),l.createElement("p",{className:"text-gray-600 mb-6"},"대시보드를 이용하려면 먼저 로그인해주세요."),l.createElement(c.a,{onClick:()=>t("/login")},"로그인하기"))));if(N)return l.createElement(n.a,null,l.createElement("div",{className:"flex justify-center items-center min-h-[400px]"},l.createElement(c.e,null)));const j=y[r]||y.GUEST;return l.createElement(n.a,null,l.createElement("div",{className:"max-w-6xl mx-auto px-4 py-8"},l.createElement("div",{className:"mb-8"},l.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"안녕하세요, ",(null==a?void 0:a.name)||(null==a||null===(e=a.email)||void 0===e?void 0:e.split("@")[0]),"님! 👋"),l.createElement("p",{className:"text-gray-600"},"TextPerfect 대시보드에 오신 것을 환영합니다.")),!x&&l.createElement("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"},l.createElement("div",{className:"flex items-center justify-between"},l.createElement("div",null,l.createElement("h3",{className:"font-semibold text-blue-900"},"프리미엄으로 업그레이드하세요!"),l.createElement("p",{className:"text-blue-700 text-sm"},"더 많은 기능과 무제한 사용량을 경험해보세요.")),l.createElement(c.a,{onClick:()=>t("/subscription")},"업그레이드"))),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},l.createElement(c.b,{className:"p-6"},l.createElement("div",{className:"flex items-center justify-between mb-2"},l.createElement("h3",{className:"text-sm font-medium text-gray-600"},"오늘 사용량"),l.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},l.createElement("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"})))),l.createElement("div",{className:"text-2xl font-bold text-gray-900 mb-1"},u.toLocaleString(),"자"),l.createElement("div",{className:"text-sm text-gray-600 mb-3"},"/ ",j.dailyChars.toLocaleString(),"자"),l.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},l.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(b(),100),"%")}}))),l.createElement(c.b,{className:"p-6"},l.createElement("div",{className:"flex items-center justify-between mb-2"},l.createElement("h3",{className:"text-sm font-medium text-gray-600"},"이번 달 문서"),l.createElement("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},l.createElement("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),l.createElement("div",{className:"text-2xl font-bold text-gray-900 mb-1"},f,"개"),l.createElement("div",{className:"text-sm text-gray-600 mb-3"},"/ ",j.monthlyDocs,"개"),l.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},l.createElement("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(g(),100),"%")}}))),l.createElement(c.b,{className:"p-6"},l.createElement("div",{className:"flex items-center justify-between mb-2"},l.createElement("h3",{className:"text-sm font-medium text-gray-600"},"총 작성량"),l.createElement("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"},l.createElement("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})))),l.createElement("div",{className:"text-2xl font-bold text-gray-900 mb-1"},p.totalCharacters.toLocaleString(),"자"),l.createElement("div",{className:"text-sm text-gray-600"},"누적 작성량")),l.createElement(c.b,{className:"p-6"},l.createElement("div",{className:"flex items-center justify-between mb-2"},l.createElement("h3",{className:"text-sm font-medium text-gray-600"},"평균 점수"),l.createElement("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"},l.createElement("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})))),l.createElement("div",{className:"text-2xl font-bold text-gray-900 mb-1"},p.averageScore,"/100"),l.createElement("div",{className:"text-sm text-gray-600"},"글쓰기 품질 점수"))),l.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},l.createElement(c.b,{className:"p-6"},l.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},"주간 활동"),l.createElement("div",{className:"space-y-4"},p.weeklyActivity.map((e,t)=>l.createElement("div",{key:t,className:"flex items-center justify-between"},l.createElement("span",{className:"text-sm font-medium text-gray-600 w-8"},e.day),l.createElement("div",{className:"flex-1 mx-4"},l.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},l.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.max(e.characters/2e3*100,5),"%")}}))),l.createElement("span",{className:"text-sm text-gray-600 w-16 text-right"},e.characters,"자"))))),l.createElement(c.b,{className:"p-6"},l.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},"계정 정보"),l.createElement("div",{className:"space-y-4"},l.createElement("div",{className:"flex justify-between items-center"},l.createElement("span",{className:"text-gray-600"},"이메일"),l.createElement("span",{className:"font-medium"},null==a?void 0:a.email)),l.createElement("div",{className:"flex justify-between items-center"},l.createElement("span",{className:"text-gray-600"},"플랜"),l.createElement("div",{className:"flex items-center space-x-2"},l.createElement("span",{className:"font-medium ".concat("PREMIUM"===r?"text-blue-600":"text-gray-600")},"PREMIUM"===r?"프리미엄":"무료"),"PREMIUM"===r&&l.createElement("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full"},"PRO"))),l.createElement("div",{className:"flex justify-between items-center"},l.createElement("span",{className:"text-gray-600"},"가입일"),l.createElement("span",{className:"font-medium"},null!=a&&a.createdAt?new Date(a.createdAt).toLocaleDateString("ko-KR"):"-")),(null==h?void 0:h.subscription)&&l.createElement("div",{className:"flex justify-between items-center"},l.createElement("span",{className:"text-gray-600"},"다음 결제일"),l.createElement("span",{className:"font-medium"},new Date(h.subscription.currentPeriodEnd).toLocaleDateString("ko-KR"))),l.createElement("div",{className:"pt-4 border-t border-gray-200"},l.createElement(c.a,{variant:"outline",className:"w-full",onClick:()=>t("/profile")},"프로필 관리"))))),l.createElement(c.b,{className:"p-6"},l.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},"빠른 시작"),l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},l.createElement("button",{onClick:()=>t("/editor"),className:"text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-all"},l.createElement("div",{className:"flex items-center mb-2"},l.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},l.createElement("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}))),l.createElement("div",{className:"font-medium text-gray-900"},"새 글 작성")),l.createElement("div",{className:"text-sm text-gray-600"},"에디터에서 새로운 글을 작성해보세요")),l.createElement("button",{onClick:()=>t("/templates"),className:"text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-all"},l.createElement("div",{className:"flex items-center mb-2"},l.createElement("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3"},l.createElement("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 00-2 2v0a2 2 0 002 2h14a2 2 0 002-2v0a2 2 0 00-2-2"}))),l.createElement("div",{className:"font-medium text-gray-900"},"템플릿 사용")),l.createElement("div",{className:"text-sm text-gray-600"},"다양한 템플릿으로 빠르게 시작하세요")),l.createElement("button",{onClick:()=>t("/coaching"),className:"text-left p-4 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-all"},l.createElement("div",{className:"flex items-center mb-2"},l.createElement("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3"},l.createElement("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}))),l.createElement("div",{className:"font-medium text-gray-900"},"AI 코치")),l.createElement("div",{className:"text-sm text-gray-600"},"글쓰기 실력을 향상시켜보세요"))))))}},94847:(e,t,a)=>{a.d(t,{a:()=>c});var r=a(96540),l=a(80113),s=a(77831),n=a(61409);const c=()=>{const{user:e,isAuthenticated:t}=(0,l.b)(),[a,c]=(0,r.useState)(!1),[o,i]=(0,r.useState)(null),m=async()=>{if(t&&null!=e&&e.email)try{c(!0);const t=await(0,s.d)(e.email);i(t)}catch(e){console.error("Failed to fetch subscription status:",e),n.b.error("���� ���¸� ��ȸ�ϴµ� �����߽��ϴ�.")}finally{c(!1)}};return(0,r.useEffect)(()=>{t&&null!=e&&e.email&&m()},[t,null==e?void 0:e.email]),{loading:a,subscriptionData:o,startCheckout:async a=>{if(t)if(null!=e&&e.id&&null!=e&&e.email)try{c(!0);const{url:t}=await(0,s.b)(a,e.id,e.email);window.location.href=t}catch(e){console.error("Checkout failed:",e),n.b.error("���� �������� �̵��ϴµ� �����߽��ϴ�."),c(!1)}else n.b.error("����� ������ �����ϴ�.");else n.b.error("�α����� �ʿ��մϴ�.")},openCustomerPortal:async()=>{if(t&&null!=e&&e.email)try{c(!0);const{url:t}=await(0,s.c)(e.email);window.location.href=t}catch(e){console.error("Customer portal failed:",e),n.b.error("���� ���� �������� �̵��ϴµ� �����߽��ϴ�."),c(!1)}else n.b.error("�α����� �ʿ��մϴ�.")},fetchSubscriptionStatus:m,isSubscribed:"PREMIUM"===(null==o?void 0:o.plan),subscriptionStatus:null==o?void 0:o.status}}}}]);