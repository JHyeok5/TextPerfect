# GitHub Repositoryë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ê¸°

## ğŸ“‹ ê°œìš”

TextPerfectëŠ” GitHub Private Repositoryë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ëŠ” í˜ì‹ ì ì¸ ì ‘ê·¼ ë°©ì‹ì„ ì±„íƒí–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì„œë²„ë¦¬ìŠ¤ í™˜ê²½ì—ì„œ ë¬´ë£Œë¡œ ì•ˆì „í•œ ë°ì´í„° ì €ì¥ì†Œë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ” ì°½ì˜ì ì¸ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ê°œë…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Netlify Functionsâ”‚    â”‚  GitHub API     â”‚    â”‚ Private Repositoryâ”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ CRUD ì‘ì—…     â”‚â—„â”€â”€â–ºâ”‚ â€¢ REST API      â”‚â—„â”€â”€â–ºâ”‚ â€¢ JSON íŒŒì¼     â”‚
â”‚ â€¢ ì¸ì¦ ì²˜ë¦¬     â”‚    â”‚ â€¢ Base64 ì¸ì½”ë”© â”‚    â”‚ â€¢ ë²„ì „ ê´€ë¦¬     â”‚
â”‚ â€¢ ë°ì´í„° ê²€ì¦   â”‚    â”‚ â€¢ ì»¤ë°‹ íˆìŠ¤í† ë¦¬ â”‚    â”‚ â€¢ ë°±ì—… ìë™í™”   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ì¥ì ê³¼ ë‹¨ì 

### âœ… **ì¥ì **
- **ë¬´ë£Œ**: GitHub Private Repository ë¬´ë£Œ ì œê³µ
- **ì•ˆì „**: Private Repositoryë¡œ ë°ì´í„° ë³´ì•ˆ ë³´ì¥
- **ë°±ì—…**: Git íˆìŠ¤í† ë¦¬ë¡œ ìë™ ë°±ì—…
- **í™•ì¥ì„±**: í•„ìš”ì‹œ ì‹¤ì œ DBë¡œ ì‰½ê²Œ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥
- **íˆ¬ëª…ì„±**: ëª¨ë“  ë°ì´í„° ë³€ê²½ ì‚¬í•­ ì¶”ì  ê°€ëŠ¥
- **ì ‘ê·¼ì„±**: GitHub APIë¥¼ í†µí•œ í‘œì¤€í™”ëœ ì ‘ê·¼

### âš ï¸ **ë‹¨ì **
- **ì„±ëŠ¥**: ëŒ€ìš©ëŸ‰ ë°ì´í„°ë‚˜ ë†’ì€ ë™ì‹œì„±ì—ëŠ” ë¶€ì í•©
- **ì œí•œ**: GitHub API Rate Limit (ì‹œê°„ë‹¹ 5,000íšŒ)
- **ë³µì¡ì„±**: íŠ¸ëœì­ì…˜ì´ë‚˜ ë³µì¡í•œ ì¿¼ë¦¬ ë¶ˆê°€ëŠ¥
- **ì§€ì—°**: ë„¤íŠ¸ì›Œí¬ ìš”ì²­ìœ¼ë¡œ ì¸í•œ ì‘ë‹µ ì§€ì—°

## ğŸ“ Repository êµ¬ì¡°

### íŒŒì¼ êµ¬ì¡°
```
TextPerfect-userdata/
â”œâ”€â”€ users.json          # ì‚¬ìš©ì ê³„ì • ì •ë³´
â”œâ”€â”€ sessions.json       # ì„¸ì…˜ ë° í† í° ê´€ë¦¬
â”œâ”€â”€ stats.json          # ì• í”Œë¦¬ì¼€ì´ì…˜ í†µê³„
â””â”€â”€ README.md           # ì €ì¥ì†Œ ì„¤ëª…
```

### ë°ì´í„° ìŠ¤í‚¤ë§ˆ

#### users.json
```json
{
  "users": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "email": "user@example.com",
      "nickname": "ì‚¬ìš©ìë‹‰ë„¤ì„",
      "passwordHash": "$2b$12$...",
      "level": 1,
      "exp": 0,
      "createdAt": "2024-01-01T00:00:00.000Z",
      "lastLoginAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z",
      "isActive": true,
      "subscription": {
        "plan": "FREE",
        "expiresAt": null,
        "usage": {
          "monthlyDocs": 0,
          "maxTextLength": 1000
        }
      }
    }
  ]
}
```

#### sessions.json
```json
{
  "sessions": [
    {
      "tokenId": "abc123def4",
      "userId": "550e8400-e29b-41d4-a716-446655440000",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "expiresAt": "2024-01-08T00:00:00.000Z",
      "isBlacklisted": true
    }
  ]
}
```

#### stats.json
```json
{
  "stats": {
    "totalUsers": 150,
    "activeUsers": 75,
    "totalOptimizations": 2500,
    "lastUpdated": "2024-01-01T00:00:00.000Z"
  }
}
```

## ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### GitHub API ì—°ë™

#### ê¸°ë³¸ ì„¤ì •
```javascript
const GITHUB_API_BASE = 'https://api.github.com';
const GITHUB_TOKEN = process.env.GITHUB_TOKEN;
const GITHUB_USERNAME = process.env.GITHUB_USERNAME;
const GITHUB_REPO = process.env.GITHUB_REPO;
```

#### API ìš”ì²­ í—¬í¼
```javascript
async function githubApiRequest(endpoint, method = 'GET', data = null) {
  const url = `${GITHUB_API_BASE}${endpoint}`;
  const options = {
    method,
    headers: {
      'Authorization': `token ${GITHUB_TOKEN}`,
      'Accept': 'application/vnd.github.v3+json',
      'User-Agent': 'TextPerfect-App'
    }
  };

  if (data) {
    options.headers['Content-Type'] = 'application/json';
    options.body = JSON.stringify(data);
  }

  const response = await fetch(url, options);
  
  if (!response.ok) {
    throw new Error(`GitHub API Error: ${response.status} ${response.statusText}`);
  }

  return response.json();
}
```

### íŒŒì¼ ì½ê¸°/ì“°ê¸°

#### íŒŒì¼ ë‚´ìš© ì½ê¸°
```javascript
async function getFileContent(filePath) {
  try {
    const endpoint = `/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/contents/${filePath}`;
    const response = await githubApiRequest(endpoint);
    
    // Base64 ë””ì½”ë”©
    const content = Buffer.from(response.content, 'base64').toString('utf-8');
    return {
      content: JSON.parse(content),
      sha: response.sha
    };
  } catch (error) {
    if (error.message.includes('404')) {
      // íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ êµ¬ì¡° ë°˜í™˜
      return {
        content: getDefaultFileContent(filePath),
        sha: null
      };
    }
    throw error;
  }
}
```

#### íŒŒì¼ ë‚´ìš© ì €ì¥
```javascript
async function saveFileContent(filePath, content, sha = null) {
  const endpoint = `/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/contents/${filePath}`;
  
  const data = {
    message: `Update ${filePath}`,
    content: Buffer.from(JSON.stringify(content, null, 2)).toString('base64')
  };

  if (sha) {
    data.sha = sha;
  }

  return await githubApiRequest(endpoint, 'PUT', data);
}
```

## ğŸ”„ CRUD ì‘ì—… íŒ¨í„´

### Create (ìƒì„±)
```javascript
async function createUser(userData) {
  const usersData = await getUsersData();
  
  const newUser = {
    id: uuidv4(),
    ...userData,
    createdAt: new Date().toISOString()
  };

  usersData.users.push(newUser);
  await saveUsersData(usersData);
  
  return newUser;
}
```

### Read (ì¡°íšŒ)
```javascript
async function findUserByEmail(email) {
  const usersData = await getUsersData();
  return usersData.users.find(user => 
    user.email.toLowerCase() === email.toLowerCase()
  );
}
```

### Update (ìˆ˜ì •)
```javascript
async function updateUser(userId, updateData) {
  const usersData = await getUsersData();
  const userIndex = usersData.users.findIndex(user => user.id === userId);
  
  if (userIndex === -1) {
    throw new Error('User not found');
  }

  usersData.users[userIndex] = {
    ...usersData.users[userIndex],
    ...updateData,
    updatedAt: new Date().toISOString()
  };

  await saveUsersData(usersData);
  return usersData.users[userIndex];
}
```

### Delete (ì‚­ì œ)
```javascript
async function deleteUser(userId) {
  const usersData = await getUsersData();
  const userIndex = usersData.users.findIndex(user => user.id === userId);
  
  if (userIndex === -1) {
    throw new Error('User not found');
  }

  const deletedUser = usersData.users.splice(userIndex, 1)[0];
  await saveUsersData(usersData);
  
  return deletedUser;
}
```

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### 1. ë°ì´í„° ìºì‹±
```javascript
const cache = new Map();
const CACHE_TTL = 5 * 60 * 1000; // 5ë¶„

async function getCachedData(key, fetchFunction) {
  const cached = cache.get(key);
  if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
    return cached.data;
  }

  const data = await fetchFunction();
  cache.set(key, { data, timestamp: Date.now() });
  return data;
}
```

### 2. ë°°ì¹˜ ì‘ì—…
```javascript
async function batchUpdateUsers(updates) {
  const usersData = await getUsersData();
  
  updates.forEach(({ userId, updateData }) => {
    const userIndex = usersData.users.findIndex(user => user.id === userId);
    if (userIndex !== -1) {
      usersData.users[userIndex] = {
        ...usersData.users[userIndex],
        ...updateData
      };
    }
  });

  await saveUsersData(usersData);
}
```

### 3. ë°ì´í„° ì••ì¶•
```javascript
function compressData(data) {
  // ë¶ˆí•„ìš”í•œ í•„ë“œ ì œê±°
  return data.map(item => {
    const { unnecessaryField, ...essentialData } = item;
    return essentialData;
  });
}
```

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ
```bash
# Netlify í™˜ê²½ ë³€ìˆ˜ì—ì„œë§Œ ì„¤ì •
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxx
GITHUB_USERNAME=your-username
GITHUB_REPO=TextPerfect-userdata
```

### 2. í† í° ê¶Œí•œ ìµœì†Œí™”
- **í•„ìš”í•œ ê¶Œí•œë§Œ**: `repo` (Private repository ì ‘ê·¼)
- **ì •ê¸°ì  ê°±ì‹ **: í† í° ë§Œë£Œ ì„¤ì •
- **ëª¨ë‹ˆí„°ë§**: ë¹„ì •ìƒì ì¸ API ì‚¬ìš© ê°ì§€

### 3. ë°ì´í„° ê²€ì¦
```javascript
function validateUserData(userData) {
  const errors = [];
  
  if (!userData.email || !isValidEmail(userData.email)) {
    errors.push('ìœ íš¨í•œ ì´ë©”ì¼ì´ í•„ìš”í•©ë‹ˆë‹¤.');
  }
  
  if (!userData.nickname || userData.nickname.length < 2) {
    errors.push('ë‹‰ë„¤ì„ì€ 2ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
  }
  
  return { isValid: errors.length === 0, errors };
}
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### 1. API ì‚¬ìš©ëŸ‰ ì¶”ì 
```javascript
async function trackApiUsage(operation, filePath) {
  console.log(`GitHub API: ${operation} ${filePath} at ${new Date().toISOString()}`);
  
  // í•„ìš”ì‹œ ì‚¬ìš©ëŸ‰ í†µê³„ ì €ì¥
  await updateStats('apiCall');
}
```

### 2. ì—ëŸ¬ ë¡œê¹…
```javascript
function logError(error, context) {
  console.error('GitHub Storage Error:', {
    message: error.message,
    context,
    timestamp: new Date().toISOString(),
    stack: error.stack
  });
}
```

### 3. ì„±ëŠ¥ ë©”íŠ¸ë¦­
```javascript
async function measurePerformance(operation, fn) {
  const startTime = Date.now();
  try {
    const result = await fn();
    const duration = Date.now() - startTime;
    console.log(`${operation} completed in ${duration}ms`);
    return result;
  } catch (error) {
    const duration = Date.now() - startTime;
    console.error(`${operation} failed after ${duration}ms:`, error.message);
    throw error;
  }
}
```

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì´ì „

#### 1. PostgreSQL ë§ˆì´ê·¸ë ˆì´ì…˜
```sql
-- ì‚¬ìš©ì í…Œì´ë¸” ìƒì„±
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  nickname VARCHAR(100) NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  level INTEGER DEFAULT 1,
  exp INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  is_active BOOLEAN DEFAULT TRUE
);
```

#### 2. ë°ì´í„° ì´ì „ ìŠ¤í¬ë¦½íŠ¸
```javascript
async function migrateToPostgreSQL() {
  const usersData = await getUsersData();
  
  for (const user of usersData.users) {
    await db.query(`
      INSERT INTO users (id, email, nickname, password_hash, level, exp, created_at, is_active)
      VALUES ($1, $2, $3, $4, $5, $6, $7, $8)
    `, [
      user.id,
      user.email,
      user.nickname,
      user.passwordHash,
      user.level,
      user.exp,
      user.createdAt,
      user.isActive
    ]);
  }
}
```

## ğŸ› ï¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### 1. Rate Limit ì´ˆê³¼
```javascript
async function handleRateLimit(error) {
  if (error.message.includes('rate limit')) {
    const resetTime = parseInt(error.headers['x-ratelimit-reset']) * 1000;
    const waitTime = resetTime - Date.now();
    
    console.log(`Rate limit exceeded. Waiting ${waitTime}ms...`);
    await new Promise(resolve => setTimeout(resolve, waitTime));
    
    // ì¬ì‹œë„
    return true;
  }
  return false;
}
```

#### 2. ë™ì‹œì„± ë¬¸ì œ
```javascript
const fileLocks = new Map();

async function withFileLock(filePath, operation) {
  while (fileLocks.has(filePath)) {
    await new Promise(resolve => setTimeout(resolve, 100));
  }
  
  fileLocks.set(filePath, true);
  try {
    return await operation();
  } finally {
    fileLocks.delete(filePath);
  }
}
```

#### 3. ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì²˜ë¦¬
```javascript
async function retryOperation(operation, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await operation();
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      
      const delay = Math.pow(2, i) * 1000; // ì§€ìˆ˜ ë°±ì˜¤í”„
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
}
```

## ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### 1. íŒŒì¼ ë¶„í• 
```javascript
// ì‚¬ìš©ì ìˆ˜ê°€ ë§ì•„ì§€ë©´ íŒŒì¼ì„ ë¶„í• 
function getUserFilePath(userId) {
  const prefix = userId.substring(0, 2);
  return `users/${prefix}/${userId}.json`;
}
```

### 2. ì¸ë±ì‹± ì „ëµ
```javascript
// ì´ë©”ì¼ ì¸ë±ìŠ¤ íŒŒì¼ ìƒì„±
async function updateEmailIndex(email, userId) {
  const indexData = await getFileContent('indexes/email.json');
  indexData.content[email] = userId;
  await saveFileContent('indexes/email.json', indexData.content, indexData.sha);
}
```

### 3. ì•„ì¹´ì´ë¹™
```javascript
// ë¹„í™œì„± ì‚¬ìš©ì ì•„ì¹´ì´ë¹™
async function archiveInactiveUsers() {
  const cutoffDate = new Date(Date.now() - 365 * 24 * 60 * 60 * 1000); // 1ë…„
  const usersData = await getUsersData();
  
  const activeUsers = [];
  const archivedUsers = [];
  
  usersData.users.forEach(user => {
    if (new Date(user.lastLoginAt) > cutoffDate) {
      activeUsers.push(user);
    } else {
      archivedUsers.push(user);
    }
  });
  
  await saveFileContent('users.json', { users: activeUsers });
  await saveFileContent('archived/users.json', { users: archivedUsers });
}
```

## ğŸ“ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. íŒŒì¼ êµ¬ì¡° ì„¤ê³„
- **ë‹¨ì¼ ì±…ì„**: ê° íŒŒì¼ì€ í•˜ë‚˜ì˜ ë°ì´í„° íƒ€ì…ë§Œ ê´€ë¦¬
- **ì ì ˆí•œ í¬ê¸°**: íŒŒì¼ë‹¹ 1MB ì´í•˜ ìœ ì§€
- **ëª…í™•í•œ ë„¤ì´ë°**: íŒŒì¼ëª…ìœ¼ë¡œ ë‚´ìš©ì„ ì‰½ê²Œ íŒŒì•… ê°€ëŠ¥

### 2. ë°ì´í„° ë¬´ê²°ì„±
- **ì›ìì  ì‘ì—…**: íŒŒì¼ ì „ì²´ë¥¼ í•œ ë²ˆì— ì—…ë°ì´íŠ¸
- **ë°±ì—… ì „ëµ**: ì¤‘ìš”í•œ ë³€ê²½ ì „ ë°±ì—… ìƒì„±
- **ê²€ì¦ ë¡œì§**: ë°ì´í„° ì €ì¥ ì „ ìœ íš¨ì„± ê²€ì‚¬

### 3. ì„±ëŠ¥ ìµœì í™”
- **ìºì‹± í™œìš©**: ìì£¼ ì½ëŠ” ë°ì´í„°ëŠ” ë©”ëª¨ë¦¬ ìºì‹œ
- **ë°°ì¹˜ ì²˜ë¦¬**: ì—¬ëŸ¬ ë³€ê²½ ì‚¬í•­ì„ í•œ ë²ˆì— ì²˜ë¦¬
- **ì••ì¶• ê³ ë ¤**: í° ë°ì´í„°ëŠ” ì••ì¶• ì €ì¥

## ğŸ¯ ê²°ë¡ 

GitHub Repositoryë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì€ ì†Œê·œëª¨ í”„ë¡œì íŠ¸ë‚˜ í”„ë¡œí† íƒ€ì…ì— ë§¤ìš° ìœ ìš©í•œ ì ‘ê·¼ë²•ì…ë‹ˆë‹¤. íŠ¹íˆ ì„œë²„ë¦¬ìŠ¤ í™˜ê²½ì—ì„œ ë¬´ë£Œë¡œ ì•ˆì „í•œ ë°ì´í„° ì €ì¥ì†Œë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ í° ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ í”„ë¡œì íŠ¸ê°€ ì„±ì¥í•˜ê³  ì‚¬ìš©ìê°€ ì¦ê°€í•˜ë©´ ì „í†µì ì¸ ë°ì´í„°ë² ì´ìŠ¤ë¡œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤í–‰íˆ í˜„ì¬ êµ¬ì¡°ëŠ” ì´ëŸ¬í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ë˜ì–´ ìˆì–´ ë¹„êµì  ì‰½ê²Œ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2024ë…„ 1ì›” (GitHub Storage ì‹œìŠ¤í…œ ì™„ì „ êµ¬í˜„ ì™„ë£Œ) 