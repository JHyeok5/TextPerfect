"use strict";(self.webpackChunktextperfect=self.webpackChunktextperfect||[]).push([[721],{82721:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var l=a(96540),r=a(80113),n=a(3469),s=a(61409);const c=()=>{const{user:e,isAuthenticated:t}=(0,r.b)(),[a,c]=(0,l.useState)([]),[m,o]=(0,l.useState)([]),[i,d]=(0,l.useState)(null),[g,u]=(0,l.useState)(!0),[x,E]=(0,l.useState)(null),[b,f]=(0,l.useState)(!1),[y,p]=(0,l.useState)("");(0,l.useEffect)(()=>{t&&N()},[t]);const N=async()=>{try{u(!0);const[e,t,a]=await Promise.all([fetch("/.netlify/functions/get-challenges"),fetch("/.netlify/functions/get-leaderboard"),fetch("/.netlify/functions/get-user-stats",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})]);if(e.ok){const t=await e.json();c(t.challenges||[])}if(t.ok){const e=await t.json();o(e.leaderboard||[])}if(a.ok){const e=await a.json();d(e.stats||null)}}catch(e){console.error("Failed to load community data:",e),s.b.error("ì»¤ë®¤ë‹ˆí‹° ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{u(!1)}};return t?g?l.createElement("div",{className:"flex items-center justify-center min-h-96"},l.createElement(n.e,null)):l.createElement("div",{className:"max-w-6xl mx-auto p-6 space-y-8"},l.createElement("div",{className:"text-center"},l.createElement("h1",{className:"text-3xl font-bold text-gray-800 mb-2"},"TextPerfect ì»¤ë®¤ë‹ˆí‹°"),l.createElement("p",{className:"text-gray-600"},"í•¨ê»˜ ê¸€ì“°ê¸° ì‹¤ë ¥ì„ í–¥ìƒì‹œí‚¤ê³  ì„±ê³¼ë¥¼ ê³µìœ í•´ë³´ì„¸ìš”")),i&&l.createElement(n.b,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white"},l.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6"},l.createElement("div",{className:"text-center"},l.createElement("div",{className:"text-2xl font-bold"},i.documentsThisMonth),l.createElement("div",{className:"text-blue-100"},"ì´ë²ˆ ë‹¬ ë¬¸ì„œ")),l.createElement("div",{className:"text-center"},l.createElement("div",{className:"text-2xl font-bold"},i.averageScore,"ì "),l.createElement("div",{className:"text-blue-100"},"í‰ê·  ì ìˆ˜")),l.createElement("div",{className:"text-center"},l.createElement("div",{className:"text-2xl font-bold"},"#",i.rank),l.createElement("div",{className:"text-blue-100"},"ì „ì²´ ìˆœìœ„")),l.createElement("div",{className:"text-center"},l.createElement("div",{className:"text-2xl font-bold"},i.badges),l.createElement("div",{className:"text-blue-100"},"íšë“ ë°°ì§€")))),l.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},l.createElement("div",{className:"lg:col-span-2"},l.createElement(n.b,null,l.createElement("div",{className:"flex items-center justify-between mb-6"},l.createElement("h2",{className:"text-xl font-bold text-gray-800"},"ğŸ† í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì±Œë¦°ì§€"),l.createElement(n.a,{variant:"outline",onClick:()=>f(!0)},"ì„±ê³¼ ê³µìœ í•˜ê¸°")),l.createElement("div",{className:"space-y-4"},a.length>0?a.map(e=>l.createElement("div",{key:e.id,className:"border rounded-lg p-4 hover:bg-gray-50 transition"},l.createElement("div",{className:"flex items-start justify-between"},l.createElement("div",{className:"flex-1"},l.createElement("h3",{className:"font-semibold text-gray-800 mb-2"},e.title),l.createElement("p",{className:"text-gray-600 text-sm mb-3"},e.description),l.createElement("div",{className:"flex items-center gap-4 text-sm text-gray-500"},l.createElement("span",null,"ì°¸ì—¬ì: ",e.participants,"ëª…"),l.createElement("span",null,"ê¸°ê°„: ",e.duration),l.createElement("span",null,"ë³´ìƒ: ",e.reward))),l.createElement("div",{className:"ml-4"},e.joined?l.createElement("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm"},"ì°¸ì—¬ ì¤‘"):l.createElement(n.a,{size:"sm",onClick:()=>(async e=>{try{(await fetch("/.netlify/functions/join-challenge",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({challengeId:e})})).ok?(s.b.success("ì±Œë¦°ì§€ì— ì°¸ì—¬í–ˆìŠµë‹ˆë‹¤!"),N()):s.b.error("ì±Œë¦°ì§€ ì°¸ì—¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(e){console.error("Failed to join challenge:",e),s.b.error("ì±Œë¦°ì§€ ì°¸ì—¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}})(e.id)},"ì°¸ì—¬í•˜ê¸°"))),e.joined&&e.progress&&l.createElement("div",{className:"mt-4"},l.createElement("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1"},l.createElement("span",null,"ì§„í–‰ë¥ "),l.createElement("span",null,e.progress.current,"/",e.progress.target)),l.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},l.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.progress.current/e.progress.target*100,"%")}}))))):l.createElement("div",{className:"text-center py-8 text-gray-500"},"í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì±Œë¦°ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.")))),l.createElement("div",null,l.createElement(n.b,null,l.createElement("h2",{className:"text-xl font-bold text-gray-800 mb-6"},"ğŸ¥‡ ì´ë²ˆ ë‹¬ ë¦¬ë”ë³´ë“œ"),l.createElement("div",{className:"space-y-3"},m.length>0?m.map((e,t)=>l.createElement("div",{key:e.id,className:"flex items-center gap-3 p-3 rounded-lg ".concat(t<3?"bg-gradient-to-r from-yellow-50 to-orange-50":"bg-gray-50")},l.createElement("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(0===t?"bg-yellow-500 text-white":1===t?"bg-gray-400 text-white":2===t?"bg-orange-600 text-white":"bg-gray-200 text-gray-600")},t+1),l.createElement("div",{className:"flex-1"},l.createElement("div",{className:"font-medium text-gray-800"},e.nickname,e.id===(null==e?void 0:e.id)&&l.createElement("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded"},"ë‚˜")),l.createElement("div",{className:"text-sm text-gray-500"},e.documents,"ê°œ ë¬¸ì„œ â€¢ í‰ê·  ",e.averageScore,"ì ")),l.createElement("div",{className:"text-right"},l.createElement("div",{className:"font-bold text-gray-800"},e.totalScore,"ì "),t<3&&l.createElement("div",{className:"text-xs text-orange-600"},"ğŸ† ë°°ì§€ íšë“")))):l.createElement("div",{className:"text-center py-8 text-gray-500"},"ë¦¬ë”ë³´ë“œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."))))),l.createElement(n.f,{open:b,onClose:()=>f(!1),title:"ì„±ê³¼ ê³µìœ í•˜ê¸°"},l.createElement("div",{className:"space-y-4"},l.createElement("div",null,l.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"ê³µìœ í•  ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”"),l.createElement("textarea",{value:y,onChange:e=>p(e.target.value),placeholder:"ì˜¤ëŠ˜ì˜ ê¸€ì“°ê¸° ì„±ê³¼ë‚˜ íŒì„ ê³µìœ í•´ë³´ì„¸ìš”...",className:"w-full h-32 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})),l.createElement("div",{className:"flex items-center gap-3"},l.createElement(n.a,{variant:"outline",onClick:()=>f(!1)},"ì·¨ì†Œ"),l.createElement(n.a,{variant:"primary",onClick:async()=>{try{(await fetch("/.netlify/functions/share-analysis",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({content:y,type:"achievement"})})).ok?(s.b.success("ë¶„ì„ ê²°ê³¼ë¥¼ ê³µìœ í–ˆìŠµë‹ˆë‹¤!"),f(!1),p("")):s.b.error("ê³µìœ ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(e){console.error("Failed to share analysis:",e),s.b.error("ê³µìœ  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},disabled:!y.trim()},"ê³µìœ í•˜ê¸°"))))):l.createElement("div",{className:"max-w-4xl mx-auto p-6"},l.createElement(n.b,{className:"text-center py-12"},l.createElement("h2",{className:"text-2xl font-bold text-gray-800 mb-4"},"ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬í•˜ê¸°"),l.createElement("p",{className:"text-gray-600 mb-6"},"ë¡œê·¸ì¸í•˜ì—¬ ê¸€ì“°ê¸° ì±Œë¦°ì§€ì— ì°¸ì—¬í•˜ê³  ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ê³¼ ê²½ìŸí•´ë³´ì„¸ìš”!"),l.createElement(n.a,{variant:"primary"},"ë¡œê·¸ì¸í•˜ê¸°")))}}}]);