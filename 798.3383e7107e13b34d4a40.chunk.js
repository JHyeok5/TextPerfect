"use strict";(self.webpackChunktextperfect=self.webpackChunktextperfect||[]).push([[798],{3798:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var l=a(96540),r=a(11080),s=a(5105),n=a(22229),c=a(96855),o=a(57260),i=a(80113),m=a(77831),u=a(61409);const d=()=>{var e;const[t]=(0,r.h)(),a=(0,r.g)(),{user:d,refreshUser:f}=(0,i.b)(),[E,p]=(0,l.useState)(!0),[x,h]=(0,l.useState)(null),[v,N]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{const e=t.get("session_id");if(!e)return N("결제 세션 ID가 없습니다."),void p(!1);try{const t=await(0,m.e)(e);h(t),f&&await f(),u.b.success("🎉 결제가 완료되었습니다! 프리미엄 기능을 이용해보세요.")}catch(e){console.error("Session verification failed:",e),N("결제 확인 중 오류가 발생했습니다."),u.b.error("결제 확인 중 오류가 발생했습니다.")}finally{p(!1)}})()},[t,f]),E?l.createElement(s.a,null,l.createElement("div",{className:"flex flex-col justify-center items-center min-h-[400px]"},l.createElement(o.a,null),l.createElement("p",{className:"mt-4 text-gray-600"},"결제 정보를 확인하고 있습니다..."))):v?l.createElement(s.a,null,l.createElement("div",{className:"max-w-2xl mx-auto px-4 py-8"},l.createElement(n.a,{className:"p-8 text-center"},l.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center"},l.createElement("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}))),l.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"결제 확인 실패"),l.createElement("p",{className:"text-gray-600 mb-6"},v),l.createElement("div",{className:"space-x-4"},l.createElement(c.a,{onClick:()=>a("/subscription")},"구독 페이지로 돌아가기"),l.createElement(c.a,{variant:"outline",onClick:()=>a("/")},"홈으로 가기"))))):l.createElement(s.a,null,l.createElement("div",{className:"max-w-2xl mx-auto px-4 py-8"},l.createElement(n.a,{className:"p-8 text-center"},l.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center"},l.createElement("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"}))),l.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"🎉 결제 완료!"),l.createElement("p",{className:"text-lg text-gray-600 mb-6"},"프리미엄 플랜 구독이 성공적으로 완료되었습니다."),x&&l.createElement("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left"},l.createElement("h3",{className:"font-semibold text-gray-900 mb-3"},"구독 정보"),l.createElement("div",{className:"space-y-2 text-sm"},l.createElement("div",{className:"flex justify-between"},l.createElement("span",{className:"text-gray-600"},"플랜:"),l.createElement("span",{className:"font-medium"},"프리미엄")),l.createElement("div",{className:"flex justify-between"},l.createElement("span",{className:"text-gray-600"},"결제 금액:"),l.createElement("span",{className:"font-medium"},"₩",null===(e=x.amount)||void 0===e?void 0:e.toLocaleString())),l.createElement("div",{className:"flex justify-between"},l.createElement("span",{className:"text-gray-600"},"결제일:"),l.createElement("span",{className:"font-medium"},(new Date).toLocaleDateString("ko-KR"))),x.nextBillingDate&&l.createElement("div",{className:"flex justify-between"},l.createElement("span",{className:"text-gray-600"},"다음 결제일:"),l.createElement("span",{className:"font-medium"},new Date(x.nextBillingDate).toLocaleDateString("ko-KR"))))),l.createElement("div",{className:"bg-blue-50 rounded-lg p-6 mb-6 text-left"},l.createElement("h3",{className:"font-semibold text-blue-900 mb-3"},"이제 이런 기능들을 이용하실 수 있습니다!"),l.createElement("ul",{className:"space-y-2 text-sm text-blue-800"},l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-4 h-4 text-blue-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},l.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})),"일일 10,000자 사용량"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-4 h-4 text-blue-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},l.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})),"월 100개 문서 작성"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-4 h-4 text-blue-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},l.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})),"고급 AI 분석 (Claude-3-Sonnet)"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-4 h-4 text-blue-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},l.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})),"모든 템플릿 접근"),l.createElement("li",{className:"flex items-center"},l.createElement("svg",{className:"w-4 h-4 text-blue-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},l.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})),"AI 코치 고급 과정"))),l.createElement("div",{className:"space-y-3"},l.createElement(c.a,{className:"w-full",onClick:()=>a("/editor")},"지금 바로 글쓰기 시작하기"),l.createElement("div",{className:"grid grid-cols-2 gap-3"},l.createElement(c.a,{variant:"outline",onClick:()=>a("/dashboard")},"대시보드 보기"),l.createElement(c.a,{variant:"outline",onClick:()=>a("/subscription")},"구독 관리"))),l.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},l.createElement("p",{className:"text-sm text-gray-500"},"구독 관리, 결제 내역 확인, 취소는 언제든지 구독 페이지에서 가능합니다.")))))}},77831:(e,t,a)=>{a.d(t,{a:()=>c,b:()=>l,c:()=>r,d:()=>s,e:()=>n}),a(22037);const l=async(e,t,a)=>{try{const l=await fetch("/.netlify/functions/stripe-create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planType:e,userId:t,userEmail:a})}),r=await l.json();if(!r.success)throw new Error(r.error||"Failed to create checkout session");return r.data}catch(e){throw console.error("Create checkout session error:",e),e}},r=async e=>{try{const t=await fetch("/.netlify/functions/stripe-customer-portal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e})}),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to create customer portal session");return a.data}catch(e){throw console.error("Create customer portal session error:",e),e}},s=async e=>{try{const t=await fetch("/.netlify/functions/stripe-get-subscription?userEmail=".concat(encodeURIComponent(e))),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to get subscription status");return a.data}catch(e){throw console.error("Get subscription status error:",e),e}},n=async e=>{try{const t=await fetch("/.netlify/functions/stripe-verify-session?session_id=".concat(e)),a=await t.json();if(!a.success)throw new Error(a.error||"Failed to verify checkout session");return a.data}catch(e){throw console.error("Verify checkout session error:",e),e}},c={PREMIUM_MONTHLY:{id:"PREMIUM_MONTHLY",name:"프리미엄 월간",price:9900,interval:"month",description:"월 9,900원으로 모든 프리미엄 기능 이용",features:["월 100개 문서","최대 10,000자","AI 고급 분석","모든 템플릿","AI 코치 과정","우선 지원"]},PREMIUM_YEARLY:{id:"PREMIUM_YEARLY",name:"프리미엄 연간",price:99e3,interval:"year",description:"연 99,000원 (2개월 무료)",savings:"19,800원 절약",features:["월 100개 문서","최대 10,000자","AI 고급 분석","모든 템플릿","AI 코치 과정","우선 지원","2개월 무료"]}}}}]);